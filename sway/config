# Config for sway
#
# Copy this to ~/.config/sway/config and edit it to your liking.
# Read `man 5 sway` for a complete reference.
# Status Bar:
# Read `man 5 sway-bar` for more information about this section.
# You can get the names of your inputs by running: swaymsg -t get_inputs
# Read `man 5 sway-input` for more information about this section.


### Inputs

# | Swap mouse buttons |
input type:pointer {
    left_handed enabled
}

# | Swap Mod1 & Mod4 |
input type:keyboard {
    xkb_options altwin:swap_alt_win
}

### Variables

# Mod4 = Logo key. Mod1 = Alt.
set $mod Mod4

# Home row direction keys, like vim
set $left h
set $down j
set $up k
set $right l
# Your preferred terminal emulator
set $term foot
# Your preferred application launcher
set $menu wmenu-run

include /etc/sway/config-vars.d/*
default_border pixel 2

# Appearance / Colors

# Focused window: deep purple border
#                                   border          indicator
client.focused          #FF0000 #666666 #690069 #666999
#
# Focused but inactive: grey
client.focused_inactive #888888 #000000 #000000 #4D4D4D

# Unfocused windows: grey
client.unfocused        #888888 #000000 #000000 #FF00FF

# Urgent windows: magenta
client.urgent           #FF00FF #000000 #000000 #FF00FF


### Output configuration
#
# Default wallpaper (more resolutions are available in /usr/share/backgrounds/sway/)
# This is commented in Debian, because the Sway wallpaper files are in a separate
# package `sway-backgrounds`. Installing this package drops a config file to
# /etc/sway/config.d/
# output * bg /usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1920x1080.png fill
#

### Idle configuration
#
#
 exec swayidle -w \
#          timeout 3600 'swaylock -f -c 000000' \
#          before-sleep 'swaylock -f -c 000000' \
          timeout 5700 'swaymsg "output * power off"' resume 'swaymsg "output * power on"' \
          timeout 6000 'systemctl suspend' \
          timeout 12000 'systemctl poweroff'
#

### Input configuration
#

### Key bindings
#
# Basics:
#
    # Start your launcher
    bindsym $mod+d exec $menu

    # Drag floating windows by holding down $mod and left mouse button.
    # Resize them with right mouse button + $mod.
    # Despite the name, also works for non-floating windows.
    # Change normal to inverse to use left mouse button for resizing and right
    # mouse button for dragging.
    floating_modifier $mod normal

    # Reload the configuration file
    bindsym $mod+Shift+c reload

    # Exit sway (logs you out of your Wayland session)
    bindsym $mod+Shift+e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -B 'Yes, exit sway' 'swaymsg exit'
#
# Workspaces:
#
    # Switch to workspace
    bindsym $mod+1 workspace number 1
    bindsym $mod+2 workspace number 2
    bindsym $mod+3 workspace number 3
    bindsym $mod+4 workspace number 4
    bindsym $mod+5 workspace number 5
    bindsym $mod+6 workspace number 6
    bindsym $mod+7 workspace number 7
    bindsym $mod+8 workspace number 8
    bindsym $mod+9 workspace number 9
    bindsym $mod+0 workspace number 10
    # Move focused container to workspace
    bindsym $mod+Shift+1 move container to workspace number 1
    bindsym $mod+Shift+2 move container to workspace number 2
    bindsym $mod+Shift+3 move container to workspace number 3
    bindsym $mod+Shift+4 move container to workspace number 4
    bindsym $mod+Shift+5 move container to workspace number 5
    bindsym $mod+Shift+6 move container to workspace number 6
    bindsym $mod+Shift+7 move container to workspace number 7
    bindsym $mod+Shift+8 move container to workspace number 8
    bindsym $mod+Shift+9 move container to workspace number 9
    bindsym $mod+Shift+0 move container to workspace number 10
    # Note: workspaces can have any name you want, not just numbers.
    # We just use 1-10 as the default.
#
    # Move focus to the parent container
    bindsym $mod+a focus parent
#
# Scratchpad:
#
    # Sway has a "scratchpad", which is a bag of holding for windows.
    # You can send windows there and get them back later.

    # Move the currently focused window to the scratchpad
    bindsym $mod+Shift+minus move scratchpad

    # Show the next scratchpad window or hide the focused scratchpad window.
    # If there are multiple scratchpad windows, this command cycles through them.
    bindsym $mod+minus scratchpad show
#
#
# Utilities:
#
    # Special keys to adjust volume via PulseAudio
    bindsym --locked XF86AudioMute exec pactl set-sink-mute \@DEFAULT_SINK@ toggle
    bindsym --locked XF86AudioLowerVolume exec pactl set-sink-volume \@DEFAULT_SINK@ -5%
    bindsym --locked XF86AudioRaiseVolume exec pactl set-sink-volume \@DEFAULT_SINK@ +5%
    bindsym --locked XF86AudioMicMute exec pactl set-source-mute \@DEFAULT_SOURCE@ toggle
    # Special keys to adjust brightness via brightnessctl
    bindsym --locked XF86MonBrightnessDown exec brightnessctl set 5%-
    bindsym --locked XF86MonBrightnessUp exec brightnessctl set 5%+
#
# ╭────────────╮
# │ Leader Key │
# ╰────────────╯
    bindsym $mod+b exec pkill -SIGUSR1 waybar
    bindsym --release Super_L mode "leader"
    bindsym --release Super_R mode "leader"

mode "leader" {
    bindsym w mode "window control"
    bindsym e mode "execute"
    bindsym s mode "screen"
    bindsym m mode "move focus"
    bindsym Shift+p mode "power"
    bindsym Escape mode "default"
}
# | Screen Mode |
mode "screen" {
    bindsym s exec grim; mode "default"
    bindsym Shift+s exec grim -g "$(slurp)"; mode "default"
    bindsym Escape mode "default"
}
# | Execute |
mode "execute" {
    bindsym w exec "librewolf"; mode "default"
    bindsym e exec "emacs"; mode "default"
    bindsym t exec $term; mode "default"
    bindsym Escape mode "default"
}
# | Window mode |
mode "window control" {
    bindsym q kill; mode "default"
    bindsym f fullscreen; mode "default"
    bindsym b splith; mode "default"
    bindsym v splitv; mode "default"
    bindsym t layout tabbed; mode "default"
    bindsym s layout toggle split; mode "default"
    bindsym Shift+f floating toggle; mode "default"
    bindsym Shift+t focus mode_toggle; mode "default"
    bindsym Shift+s layout stacking; mode "default"
    bindsym r mode "resize"
    bindsym Escape mode "default"
}
# | Resize mode |
mode "resize" {
    # resize using vim
    bindsym $left resize shrink width 10px
    bindsym $down resize grow height 10px
    bindsym $up resize shrink height 10px
    bindsym $right resize grow width 10px
     # resize using arrows
    bindsym Left resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym Right resize grow width 10px
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
# | Move focus |
mode "move focus" {
    bindsym m mode "move window"
    bindsym $left focus left
    bindsym $down focus down
    bindsym $up focus up
    bindsym $right focus right
    # Or use $mod+[up|down|left|right]
    bindsym Left focus left
    bindsym Down focus down
    bindsym Up focus up
    bindsym Right focus right
    bindsym Escape mode "default"
    bindsym Return mode "default"
}
# | Move Window |
mode "move window" {
    bindsym m mode "move focus"
    bindsym $left move left
    bindsym $down move down
    bindsym $up move up
    bindsym $right move right
    # Ditto, with arrow keys
    bindsym Left move left
    bindsym Down move down
    bindsym Up move up
    bindsym Right move right
    bindsym w mode "move to workspace"
    bindsym Escape mode "default"
    bindsym Return mode "default"
}
# | Move to workspace |
mode "move to workspace" {
    bindsym 1 move container to workspace number 1; mode "default"
    bindsym 2 move container to workspace number 2; mode "default"
    bindsym 3 move container to workspace number 3; mode "default"
    bindsym 4 move container to workspace number 4; mode "default"
    bindsym 5 move container to workspace number 5; mode "default"
    bindsym 6 move container to workspace number 6; mode "default"
    bindsym 7 move container to workspace number 7; mode "default"
    bindsym 8 move container to workspace number 8; mode "default"
    bindsym 9 move container to workspace number 9; mode "default"
    bindsym 0 move container to workspace number 10; mode "default"
    bindsym Escape mode "default"
}
# | Power |
mode "power" {
    bindsym o exec systemctl poweroff
    bindsym Escape mode "default"
}
#
# ╭──────╮
# │Extras│
# ╰──────╯
#
# | Hide Cursor |
seat * hide_cursor 3000
seat * hide_cursor when-typing enable

# | Start Waybar instead of Swaybar |
exec waybar  # use `pkill waybar && waybar &` after making waybar changes

# | Sway "which-key" |
exec_always ~/.config/sway/scripts/sway_whichkey.py
for_window [app_id="sway-whichkey"] floating enable, sticky enable, resize set 700 300, move center top
no_focus [app_id="sway-whichkey"]

include /etc/sway/config.d/*
# | Auto-start Emacs on login |
exec emacs
